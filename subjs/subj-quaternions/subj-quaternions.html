<!DOCTYPE html><html><head><title>Quaternion - DemoHut</title><link rel="stylesheet" href="/main.css"></head><body><div class="jumbotron jumbotron-fluid text-monospace" id="jumbotron"><div class="container" style="position: relative"><h1><a href="/">DemoHut</a></h1><a class="text-secondary" href="/about_me.json" target="_blank" style="position: absolute; right: 15px; bottom: 0px;">About me</a></div></div><div class="container"><form class="text-right" action="/"><button class="btn btn-outline-primary" type="submit">← all posts</button></form><div class="display-4"><p>Quaternion</p></div><div id="content"><p class="sub-title">What is it</p><p>Quaternion is a tool for rotation around an arbitrary axis. Compared with rotation matrix, it is more compact in representation and more efficient when it comes to tasks like slerp. Moreover, it avoids the dreaded gimbal lock issue of Euler Angle.</p><p>Although quaternions were invented in 1843 as an extension to the complex numbers, it was not until 1985 that it was introduced to computer graphics.</p><p>Note that only with unit quaternions are we able to perform rotations correctly. Make sure they are normalized before you use them.</p><div class="row text-monospace"><div class="col-lg" id="view-quat"></div><div class="col-lg"><h6>Angle</h6><div class="row"><div class="col-md"><input class="custom-range" id="slider-angle" type="range"></div><div class="col-md" id="label-angle"></div></div><h6>Axis</h6><div class="row"><div class="col-md"><input class="custom-range" id="slider-axis-x" type="range"></div><div class="col-md" id="label-axis-x"></div></div><div class="row"><div class="col-md"><input class="custom-range" id="slider-axis-y" type="range"></div><div class="col-md" id="label-axis-y"></div></div><div class="row"><div class="col-md"><input class="custom-range" id="slider-axis-z" type="range"></div><div class="col-md" id="label-axis-z"></div></div></div><div class="col-lg"><h6>Quaternion(raw)</h6><p id="label-quat-raw"></p><h6>Quaternion(unit)</h6><p id="label-quat-unit"></p></div></div><p></p><p class="sub-title">Interpolation</p><p>Interpolation is an operation that, given two unit quaternions, q and r, and a parameter t in the range[0, 1], computes an interpolated quaternion. It is often used to perform animations.</p><dl><dt>Linear interpolation (lerp)</dt><dd>This is the simplest and the most efficient one of the three. As you can see from the demo below, it produces a straight trace. The downside is that the rotation speed is not constant (as it is then projected to the hypersphere), generally faster in the middle.</dd><dt>Spherical linear interpolation (slerp)</dt><dd>Unlike lerp, slerp produces evenly distributed samples along the arc on the hypersphere, which provides a better experience of animation.</dd><dt>Spherical cubic interpolation (squad)</dt><dd>As you can see from the demo, with lerp or slerp there are sudden jerks when a new animation begins. This is because the trace direction is not continuous, even though the trace itself is. Using some sort of spline it can be solved, and the trace gets really smooth at the turns. Note that this method requires the knowledge of the next animation target's position in advance.</dd></dl><div class="row"><div class="col-lg" id="view-slerp-world"></div><div class="col-lg" id="view-slerp-sphere"></div><div class="col-lg"><div class="container"><form><div class="radio"><label><input class="form-check-input" type="radio" id="radio-lerp"><label class="form-check-label" for="radio-lerp">lerp</label></label></div><div class="radio"><label><input class="form-check-input" type="radio" id="radio-slerp"><label class="form-check-label" for="radio-slerp">slerp</label></label></div><div class="radio"><label><input class="form-check-input" type="radio" id="radio-squad"><label class="form-check-label" for="radio-squad">squad</label></label></div></form></div></div></div><p></p><p>Although we cannot visualize the 4-D unit hypersphere, here is a workaround: projecting (x, y, z) components directly into the 3-D space, and indicating the magnitude of w by the 3-D sphere's radius. The larger the radius, the lesser the w.</p><p>It is noteworthy that every quaternion has its antipodal counterpart (by negating all its components), which produces the same rotation, but may take a shorter path of interpolation, thus preventing an unnecessary sudden turn. Here for simplicity, I ignore this optimization and just use any randomly generated unit quaternion.</p><div class="sub-title">References</div><ul><li>Model is from <a href="https://poly.google.com/view/bgUY8zN2Bq9">here</a></li><li><a href="https://threejs.org/examples/webgl_math_orientation_transform.html">A simplified demo</a></li><li><a href="https://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation#The_hypersphere_of_rotations">Wiki - visualization</a></li><li><a href="https://youtu.be/4mXL751ko0w">Quick understanding</a></li><li><a href="https://tiborstanko.sk/lerp-vs-slerp.html">A 2D demo</a></li></ul><script src="./subj-quaternions.js" type="module"></script></div><a class="text-right" href="https://github.com/ZhujinLi/ZhujinLi.github.io/tree/master/_source_code/src/subjs/subj-quaternions" target="_blank"><p>→ view src</p></a><div class="hr-theme-slash-2"><div class="hr-line l"></div><div class="hr-icon"><a href="https://github.com/ZhujinLi"><img src="/links/github.png" height="32px"></a></div><div class="hr-icon"><a href="https://www.cnblogs.com/xrst"><img src="/links/cnblogs.png" height="32px"></a></div><div class="hr-icon"><a href="https://codepen.io/zjli"><img src="/links/codepen.png" height="32px"></a></div><div class="hr-icon"><a href="https://www.shadertoy.com/user/zjli"><img src="/links/shadertoy.png" height="32px"></a></div><div class="hr-line r"></div></div></div><script src="/main.js" type="module"></script></body></html>