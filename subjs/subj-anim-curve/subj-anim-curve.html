<!DOCTYPE html><html><head><title>Reverse-engineer animation curve - DemoHut</title><link rel="stylesheet" href="/main.css"><meta charset="UTF-8"></head><body><div class="jumbotron jumbotron-fluid text-monospace" id="jumbotron"><div class="container" style="position: relative"><h1><a href="/">DemoHut</a></h1><a class="text-secondary" href="/about_me.json" target="_blank" style="position: absolute; right: 15px; bottom: 0px;">About me</a></div></div><div class="container"><form class="text-right" action="/"><button class="btn btn-outline-primary" type="submit">← all posts</button></form><div class="display-4"><p>Reverse-engineer animation curve</p></div><div id="content"><p>Animations do not have to be linear. With the help of Bezier curve, we can create more vibrant transitions like this one from <a href="https://material.io/design/motion/speed.html" target="_blank">Google Material Design</a>:</p><video class="video-fluid z-depth-1" autoplay loop muted height="300"><source src="./material_standard_curve.mp4" type="video/mp4"></video><p>Modern Web languages have built-in support for these curves. Try it out <a href="https://cubic-bezier.com/" target="_blank">here</a>.</p><p>Recently a sudden thought came to me: how commonly are these curve used in real world UI designs? To find out, I have to 1) make some screen recordings, and then 2) reverse-engineer the original animation curve out.</p><p>The first step is easy, since most mobile phones have embedded screen recording function. For the second part, which is a bit tricky, I'll seek a little help from OpenCV's object tracking algorithms.</p><hr><div class="d-flex justify-content-center"><div class="spinner-border" id="loading-ico" role="status"><span class="sr-only">Loading...</span></div></div><div id="opencv-content" style="display: none"><div class="row"><div class="col-lg"><h6>File: (default is <a href="./example.mp4" target="_blank">example.mp4</a>)</h6><input class="form-control-file" id="input-video-file" type="file"><br><h6>ROI:</h6><div class="row"><div class="col-md"><input class="custom-range" id="slider-roi-l" type="range" min="0" max="1" step="0.01"></div><div class="col-md" id="label-roi-l"></div></div><div class="row"><div class="col-md"><input class="custom-range" id="slider-roi-t" type="range" min="0" max="1" step="0.01"></div><div class="col-md" id="label-roi-t"></div></div><div class="row"><div class="col-md"><input class="custom-range" id="slider-roi-r" type="range" min="0" max="1" step="0.01"></div><div class="col-md" id="label-roi-r"></div></div><div class="row"><div class="col-md"><input class="custom-range" id="slider-roi-b" type="range" min="0" max="1" step="0.01"></div><div class="col-md" id="label-roi-b"></div></div><br><h6>Start time:</h6><div class="row"><div class="col-md"><input class="custom-range" id="slider-start-time" type="range" min="0" max="1" step="0.02"></div><div class="col-md" id="label-start-time"></div></div><br><h6>End time:</h6><div class="row"><div class="col-md"><input class="custom-range" id="slider-end-time" type="range" min="0" max="1" step="0.02"></div><div class="col-md" id="label-end-time"></div></div><br><button class="btn btn-primary" id="btn-analyze">Analyze!</button></div><div class="col-lg"><canvas id="canvas-start-time"></canvas><p>Start frame</p></div><div class="col-lg"><canvas id="canvas-end-time"></canvas><p>End frame</p></div></div></div><div style="position: relative; margin-top: 20px; margin-bottom: 20px; height:300px; width:100%"><canvas id="plot-curve"></canvas></div><hr><p>All the codes are run on the browser, so it might take a while before OpenCV.js is loaded.</p><p>The idea is quite simple. For every pair of consecutive frames, <strong>cv.findTransformECC()</strong> is called to evaluate a 2*3 affine transformation matrix. I then extract the translation, rotation and scaling components from it, independently.</p><p>The default example works well on my Opera/MacOS, and the result shows the translation animation curve is indeed a Bezier one. You can try with your own recording videos (only your browser can see the content).</p><script src="/libs/opencv.2a52e44bc6.js"></script><script src="./subj-anim-curve.js" type="module"></script></div><a class="text-right" href="https://gitee.com/xyuv/xyuv/tree/master/_source_code/src/subjs/subj-anim-curve" target="_blank"><p>→ view src</p></a><div class="hr-theme-slash-2"><div class="hr-line l"></div><div class="hr-icon"><a href="https://www.cnblogs.com/xrst"><img src="/links/cnblogs.png" height="32px"></a></div><div class="hr-icon"><a href="http://jsrun.net/u/zjli"><img src="/links/jsrun.png" height="32px"></a></div><div class="hr-icon"><a href="https://github.com/ZhujinLi"><img src="/links/github.png" height="32px"></a></div><div class="hr-icon"><a href="https://www.shadertoy.com/user/zjli"><img src="/links/shadertoy.png" height="32px"></a></div><div class="hr-line r"></div></div></div><script src="/main.js" type="module"></script></body></html>