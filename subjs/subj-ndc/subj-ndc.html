<!DOCTYPE html><html><head><title>NDC curve - DemoHut</title><link rel="stylesheet" href="/main.css"></head><body><div class="jumbotron jumbotron-fluid text-monospace" id="jumbotron"><div class="container" style="position: relative"><h1><a href="/">DemoHut</a></h1><a class="text-secondary" href="/about_me.json" target="_blank" style="position: absolute; right: 15px; bottom: 0px;">About me</a></div></div><div class="container"><form class="text-right" action="/"><button class="btn btn-outline-primary" type="submit">← all posts</button></form><div class="display-4"><p>NDC curve</p></div><div id="content"><p>The z value in NDC (stored in depth buffer) is not linear to the original z value:</p><p class="text-center text-monospace">z_ndc = -(2*f*n/(f-n)) * (1/z) + (f+n)/(f-n)</p><p>where n is the near plane, and f is the far plane.</p><div style="position:relative;color:white;"><canvas id="view-ndc"></canvas><div style="position:absolute;left:0px;top:0px;width:300px;height:100%;"><p>Camera view</p></div><div id="area-ndc-middle" style="position:absolute;left:300px;top:0px;width:300px;height:100%;"><p>External view</p></div><div id="area-ndc-right" style="position:absolute;left:600px;top:0px;width:300px;height:100%;"><p>NDC cube</p></div><div style="position:absolute;bottom:20px;left:20px;"><div><input class="custom-range" id="slider-near" type="range"></div><div id="label-near"></div></div></div><div style="position: relative; margin-top: 20px; height:200px; width:900px"><canvas id="plot-ndc"></canvas></div><p></p><p>Here I keep the distance between the near plane and the far plane constant at 100. When the near plane is set very small, almost all the z values fall into a narrow range close to 1, and the balls are squashed onto the far plane. In particular, if the near plane is set 0.00001, z-fighting would appear distinctly. A solution to this is using a non-linear (like logarithmic) z buffer. Anyway one should consider setting a reasonable range for the frustum in the first place.</p><script src="./subj-ndc.js" type="module"></script></div><a class="text-right" href="https://github.com/ZhujinLi/ZhujinLi.github.io/tree/master/_source_code/src/subjs/subj-ndc" target="_blank"><p>→ view src</p></a><div class="hr-theme-slash-2"><div class="hr-line l"></div><div class="hr-icon"><a href="https://github.com/ZhujinLi"><img src="/links/github.png" height="32px"></a></div><div class="hr-icon"><a href="https://www.cnblogs.com/xrst"><img src="/links/cnblogs.png" height="32px"></a></div><div class="hr-icon"><a href="https://codepen.io/zjli"><img src="/links/codepen.png" height="32px"></a></div><div class="hr-icon"><a href="https://www.shadertoy.com/user/zjli"><img src="/links/shadertoy.png" height="32px"></a></div><div class="hr-line r"></div></div></div><script src="/main.js" type="module"></script></body></html>