<!DOCTYPE html><html><head><title>Logarithmic scaling - DemoHut</title><link rel="stylesheet" href="/main.css"></head><body><div class="jumbotron jumbotron-fluid text-monospace" id="jumbotron"><div class="container" style="position: relative"><h1><a href="/">DemoHut</a></h1><a class="text-secondary" href="/about_me.json" target="_blank" style="position: absolute; right: 15px; bottom: 0px;">About me</a></div></div><div class="container"><form class="text-right" action="/"><button class="btn btn-outline-primary" type="submit">← all posts</button></form><div class="display-4"><p>Logarithmic scaling</p></div><div id="content"><p>In map applications, scale is represented more preferably in logarithmic form, denoted "zoom" here:</p><math display="block"><mrow><mi>zoom</mi><mo>=</mo><msub><mi>log</mi><mn>2</mn></msub><mfrac><mi>scale</mi><mi><msub><mi>scale</mi><mn>0</mn></msub></mi></mfrac></mrow></math><p>Where <math><msub><mi>scale</mi><mn>0</mn></msub></math> is the scale when zoom is 0. For example, if <math><msub><mi>scale</mi><mn>0</mn></msub><mo>=</mo><mtext>1:4000</math>, then zoom 3 corresponds to scale 1:500.</p><div style="position:relative;"><div class="row"><div class="col-lg"><canvas id="canvas-cmp"></canvas></div><div class="col-lg"><div class="row"><button id="btn-cmp-zoom-in"><img src="zoom_in.png" height="40px"></button></div><div class="row"><button id="btn-cmp-zoom-out"><img src="zoom_out.png" height="40px"></button></div></div><p style="position:absolute;bottom:10px;left:10px;">Scale (linear)</p><p style="position:absolute;bottom:10px;left:310px;">Zoom (logarithmic)</p></div></div><p>As is showed in the above comparison, the animation in logarithmic form is more consistent.</p><p>If the two concepts are confused, unexpected behaviors might be observed. Following are some I've found in real-world mobile apps.</p><div class="sub-title">1. Camera Translation</div><p>Modern map apps support the gesture "zooming at position" in general. This is the composition of panning and zooming, or "translation" of the camera in 3D world, in both horizontal- and vertical- directions. We expect the trace of the translation to be straight. If zooming is applied logarithmically with the panning linearly, the curve is not straight, and it feels somewhat odd. To correct this, we can either</p><ol><li>use linear zooming (like here), or</li><li>use log panning</li></ol><div style="position:relative;"><canvas id="canvas-translation"></canvas><p style="position:absolute;bottom:10px;left:10px;">Wrong</p><p style="position:absolute;bottom:10px;left:310px;">Correct</p></div><button class="btn-primary" id="btn-translation">Zoom in / Zoom out at pos</button><p></p><div class="sub-title">2. Screen space animation</div><p>Likewise, if screen space animation and world space one are combined, we need to pay special attention to ensure consistent zooming effect. In this example, the route overlay is represented in screen space, and the map is drawn in world space. If we simply apply linear interpolation to the screen coordinates of the route while zooming the map, the two would not matched during the animation. I'll try the second solution to fix this.</p><div style="position:relative;"><canvas id="canvas-screen"></canvas><p style="position:absolute;bottom:10px;left:10px;">Wrong</p><p style="position:absolute;bottom:10px;left:310px;">Correct</p></div><button class="btn-primary" id="btn-screen">Zoom in / Zoom out</button><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script><script src="./subj-log-scaling.js" type="module"></script></div><a class="text-right" href="https://gitee.com/xyuv/xyuv/tree/master/_source_code/src/subjs/subj-log-scaling" target="_blank"><p>→ view src</p></a><div class="hr-theme-slash-2"><div class="hr-line l"></div><div class="hr-icon"><a href="https://www.cnblogs.com/xrst"><img src="/links/cnblogs.png" height="32px"></a></div><div class="hr-icon"><a href="http://jsrun.net/u/zjli"><img src="/links/jsrun.png" height="32px"></a></div><div class="hr-icon"><a href="https://github.com/ZhujinLi"><img src="/links/github.png" height="32px"></a></div><div class="hr-icon"><a href="https://www.shadertoy.com/user/zjli"><img src="/links/shadertoy.png" height="32px"></a></div><div class="hr-line r"></div></div></div><script src="/main.js" type="module"></script></body></html>